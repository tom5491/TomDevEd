<!--
  @description       : 
  @author            : Tom Philippou
  @group             : 
  @last modified on  : 27-08-2021
  @last modified by  : Tom Philippou
  Modifications Log
  Ver   Date         Author          Modification
  1.0   25-08-2021   Tom Philippou   Initial Version
-->
<aura:component controller="UkGovCharityComponentController" implements="flexipage:availableForAllPageTypes,force:lightningQuickActionWithoutHeader,force:hasRecordId">
    <aura:attribute name="selectedValue" type="String" default="searchCharityName" />
    <aura:attribute name="registeredNumber" type="String" default="" />
    <aura:attribute name="suffix" type="String" default="" />
    <aura:attribute name="charityName" type="String" default="" />

    <aura:attribute name="showSpinner" type="Boolean" default="false" />
    <aura:attribute name="charityInfo" type="List" default="[]" />
    <aura:attribute name="isSuccess" type="Boolean" default="false" />
    <aura:attribute name="updateSuccess" type="Boolean" default="false" />

    <aura:attribute name="currentAccount" type="Account" />
    <!-- <aura:attribute name="charityList" type="List" /> -->

    <aura:attribute name="charityList" type="Object" />
    <aura:attribute name="columns" type="List" />
    <aura:attribute name="selectCharity" type="Account" />

    <aura:attribute name="pageNumber" type="Integer" default="0" />

    <aura:handler name="init" value="{! this }" action="{! c.init }" />

    <!-- <lightning:card title="Charity Search"> -->
    <aura:if isTrue="{!v.showSpinner}">
        <div>
            <lightning:spinner size="medium" />
        </div>
    </aura:if>

    <!--Custom Styles for Modal Header and Footer-->
    <aura:html tag="style">
        .cuf-content { padding: 0 0rem !important; } .slds-p-around--medium { padding: 0rem !important; } .slds-modal__content{ overflow-y:hidden !important; height:unset !important; max-height:unset !important; }
    </aura:html>

    <!--Modal Header-->
    <div class="modal-header slds-modal__header slds-size_1-of-1">
        <h4 class="title slds-text-heading--medium">Charity Commission</h4>
    </div>
    <!--End Modal Header-->

    <!--Modal Body-->
    <div aura:id="modalContainer" class="slds-modal__content">
        <lightning:layout multipleRows="true">
            <aura:if isTrue="{!v.pageNumber == 0}">
                <lightning:layoutItem class="slds-p-around_small" size="12">
                    <lightning:input class="searchBar" label="Charity Name:" required="true" value="{!v.currentAccount.Name}" oncommit="{!c.searchCommit}" />
                </lightning:layoutItem>
            </aura:if>
            <aura:if isTrue="{!v.pageNumber == 1}">
                <lightning:layoutItem class="slds-p-around_small" size="12">
                    <lightning:datatable keyField="Registered_Number__c" data="{! v.charityList }" columns="{! v.columns }" hideCheckboxColumn="false" maxRowSelection="1" />
                </lightning:layoutItem>
            </aura:if>
            <aura:if isTrue="{!v.pageNumber == 2}">
                <lightning:layoutItem class="slds-p-around_small" size="12">
                    <!-- do comparison of existing and new data -->
                </lightning:layoutItem>
            </aura:if>
            <aura:if isTrue="{!v.pageNumber == 3}">
                <lightning:layoutItem class="slds-p-around_small" size="12">
                    <aura:if isTrue="updateSuccess" />
                </lightning:layoutItem>
            </aura:if>
        </lightning:layout>
    </div>
    <!--End of Modal Body-->

    <!--Modal Footer-->
    <div class="modal-footer slds-modal__footer slds-size_1-of-1">
        <aura:if isTrue="{!v.pageNumber != 0}">
            <lightning:button variant="Neutral" class="slds-button" label="Previous" onclick="{!c.previousPage}" />
        </aura:if>
        <aura:if isTrue="{!and(v.pageNumber != 2, v.pageNumber != 3)}">
            <lightning:button variant="Brand" class="slds-button" label="Next" onclick="{!c.nextPage}" />
        </aura:if>
        <aura:if isTrue="{!v.pageNumber == 2}">
            <lightning:button variant="Brand" class="slds-button" label="Submit" onclick="{!c.submit}" />
        </aura:if>
    </div>
    <!--End of Modal Footer-->

    <!-- 
        <lightning:layout multipleRows="true">
            <lightning:layoutItem class="slds-p-around_small" size="12">
                <lightning:select name="calloutSelect" label="Callout" value="{!v.selectedValue}">
                    <option value="">choose one...</option>
                    <option value="allcharitydetails">Get All Charity Details</option>
                    <option value="searchCharityName">Search By Charity Name</option>
                </lightning:select>
            </lightning:layoutItem>

            <aura:if isTrue="{!v.selectedValue == 'allcharitydetails'}">
                <lightning:layoutItem class="slds-p-around_small" size="6">
                    <lightning:input label="Registered Number" required="true" value="{!v.registeredNumber}" />
                </lightning:layoutItem>
                <lightning:layoutItem class="slds-p-around_small" size="6">
                    <lightning:input label="Supplementary Number" required="true" value="{!v.suffix}" fieldLevelHelp="If unsure, try 0." />
                </lightning:layoutItem>
            </aura:if>
            <aura:if isTrue="{!v.selectedValue == 'searchCharityName'}">
                <lightning:layoutItem class="slds-p-around_small" size="12">
                    <lightning:input label="Charity Name:" required="true" type="search" value="{!v.charityName}" oncommit="{!c.searchCommit}" />
                </lightning:layoutItem>
            </aura:if>
            <lightning:layoutItem class="slds-p-around_small slds-align_absolute-center" size="12">
                <lightning:button label="Search" onclick="{!c.search}" />
            </lightning:layoutItem>

            <aura:if isTrue="{!v.isSuccess}">
                <aura:iteration items="{!v.charityInfo}" var="cus" indexVar="key">
                    <lightning:layoutItem class="slds-p-around_small" size="6"> <b>{!cus.key} </b></lightning:layoutItem>

                    <lightning:layoutItem class="slds-p-around_small" size="6"> {!cus.value} </lightning:layoutItem>
                    <aura:if isTrue="{!cus.key == 'Date of Removal:'}">
                        <lightning:layoutItem class="slds-p-around_small" size="12">
                            <hr style="border-color: black; border-style: solid; width: 100%" />
                        </lightning:layoutItem>
                    </aura:if>
                </aura:iteration>
            </aura:if>
        </lightning:layout> -->
    <!-- </lightning:card> -->
</aura:component>